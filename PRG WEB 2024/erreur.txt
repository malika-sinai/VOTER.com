// Effectuer la requête POST vers connection_controlleur.php
            var req2 = new XMLHttpRequest();
            req2.open("POST", "connection_controlleur.php");
            req2.setRequestHeader("Content-Type", "application/json"); // Définir le type de contenu de la requête
            req2.onload = function () {
                var res_php = JSON.parse(req2.responseText);
                console.log(req2.responseText); // Vérifiez la réponse de PHP dans la console

                // Redirection en fonction de la réponse PHP
                if (res_php.message === "succes" && user.type === "voter") {
                    window.location.href = "votant_acceuil_vue.php?nom=" + res_php.nom + "&email=" + user.email;
                } else if (user.type === "organiser") {
                    window.location.href = "organisateur_acceuil_vue.php?nom=" + res_php.nom;
                }
            };
            req2.send(JSON.stringify(user)); // Envoyer les données utilisateur JSON



function Chercher(element_a_chercher, data_json){
    var trouver = false;
    for(var i = 0;i<data_json.length;i++){
        if(data_json[i].email === element_a_chercher){
            trouver = true;
            break;
        }
    }
    
    return trouver;
}

function traitement_inscription(){
    var inputNom = document.querySelector('#t1');
    var inputPrenom = document.querySelector('#t2');
    var inputEmail = document.querySelector("#t3");
    var inputPassword = document.querySelector('#t4');
    var inputRePassword = document.querySelector('#t5');
    var selectType = document.querySelector('#s1');
    var feedback = document.querySelector('#message');
    if(inputNom.value.length < 1 ||inputPrenom.value.length < 1 || inputEmail.value.length < 1 || inputPassword.value.length < 1 || inputRePassword.value.length < 1 ){
        feedback.innerText = "Remplissez tous les champs s'il vous plaît";
        feedback.style.display="block";
        setTimeout(() =>(
            feedback.style.display = "none"
        ),3000);
        return
    }
    if(inputPassword.value != inputRePassword.value){
        feedback.innerText = "Les mots de passe ne sont pas conforme";
        feedback.style.display="block";
        setTimeout(() =>(
            feedback.style.display = "none"
        ),3000);
        return
    }
    var user = {"non": inputNom.value,"prenom":inputPrenom.value , "email": inputEmail.value,"mot de passe":inputRePassword.value};
    var req = new XMLHttpRequest();
    req.open("POST","Donnee.json");
    req.onload = function(){
    var data_obtenu = JSON.parse(req.responseText);
    if(Chercher(user.email,data_obtenu["L3_MIAGE"]) === true || Chercher(user.email,data_obtenu["L3_INFO"]) === true || Chercher(user.email,data_obtenu["PROF_PROG_WEB"])){
            feedback.innerText = "Votre compte existe déjà veuillez vous connecter.";
            feedback.style.display="block";
            setTimeout(() =>(
            feedback.style.display = "none"
            ),3000);
            return
    }else{
            var req2 = new XMLHttpRequest();
            req2.open("POST","inscription_controlleur.php?nom="+inputNom.value+"&prenom="+inputPrenom.value+"&email="+inputEmail.value+"&mot_de_passe="+inputRePassword.value+"&type="+selectType.value);
            req2.onload = function(){
                console.log(req2.responseText);
                var res_php = JSON.parse(req2.responseText);
                if(res_php.message === "succes") {
                    window.location.href="connection_vue.php";
                }else{
                    feedback.innerText = "Votre compte a bien été créer.";
                    feedback.style.display="block";
                    setTimeout(() =>(
                    feedback.style.display = "none"
                    ),3000);
                    return
                    
                }
            }
            req2.send();
        }
    
    }
    req.send();

}

/*console.log(inputEmail);
console.log(inputNom);
console.log(inputPrenom);
console.log(inputPassword);
console.log(inputRePassword);
console.log(selectType);
console.log(button);*/
var button_inscription=document.querySelector('#first_button');
button_inscription.addEventListener('click',traitement_inscription);  


